<template>
    <section>
        <div class="vertical">
            <p>刚到西宁，机场翻新，却找不到的士，又见很多拉客司机，称他们是市区出租车，正规车，回程也一百元，但机场交警不准他们带客人。我惊，那谁才可以拉客呢？他们说机场有五十几台的士，每年向机场交钱两万元，没有关系的还交不上，只有他们才能拉客。我说坐你的车走吧，我靠~他惊恐，别大声，抓了要罚款</p>
            <p>我们像做贼一样偷偷摸上车，司机变得很开心，说他从两点等到六点，总算赚到一百元，没有被交警发现没有扣留驾驶证罚款两百。然后，他开始恨恨诉苦，机场那帮孙子，一天赚八百！给了交警还有好多钱！</p>
            <p>刚到西宁，机场翻新，却找不到的士，又见很多拉客司机，称他们是市区出租车，正规车，回程也一百元，但机场交警不准他们带客人。我惊，那谁才可以拉客呢？他们说机场有五十几台的士，每年向机场交钱两万元，没有关系的还交不上，只有他们才能拉客。我说坐你的车走吧，我靠~他惊恐，别大声，抓了要罚款</p>
            <p>我们像做贼一样偷偷摸上车，司机变得很开心，说他从两点等到六点，总算赚到一百元，没有被交警发现没有扣留驾驶证罚款两百。然后，他开始恨恨诉苦，机场那帮孙子，一天赚八百！给了交警还有好多钱！</p>
            <p>刚到西宁，机场翻新，却找不到的士，又见很多拉客司机，称他们是市区出租车，正规车，回程也一百元，但机场交警不准他们带客人。我惊，那谁才可以拉客呢？他们说机场有五十几台的士，每年向机场交钱两万元，没有关系的还交不上，只有他们才能拉客。我说坐你的车走吧，我靠~他惊恐，别大声，抓了要罚款</p>
            <p>我们像做贼一样偷偷摸上车，司机变得很开心，说他从两点等到六点，总算赚到一百元，没有被交警发现没有扣留驾驶证罚款两百。然后，他开始恨恨诉苦，机场那帮孙子，一天赚八百！给了交警还有好多钱！</p>
            <p>刚到西宁，机场翻新，却找不到的士，又见很多拉客司机，称他们是市区出租车，正规车，回程也一百元，但机场交警不准他们带客人。我惊，那谁才可以拉客呢？他们说机场有五十几台的士，每年向机场交钱两万元，没有关系的还交不上，只有他们才能拉客。我说坐你的车走吧，我靠~他惊恐，别大声，抓了要罚款</p>
            <p>我们像做贼一样偷偷摸上车，司机变得很开心，说他从两点等到六点，总算赚到一百元，没有被交警发现没有扣留驾驶证罚款两百。然后，他开始恨恨诉苦，机场那帮孙子，一天赚八百！给了交警还有好多钱！</p>
            <p>刚到西宁，机场翻新，却找不到的士，又见很多拉客司机，称他们是市区出租车，正规车，回程也一百元，但机场交警不准他们带客人。我惊，那谁才可以拉客呢？他们说机场有五十几台的士，每年向机场交钱两万元，没有关系的还交不上，只有他们才能拉客。我说坐你的车走吧，我靠~他惊恐，别大声，抓了要罚款</p>
            <p>我们像做贼一样偷偷摸上车，司机变得很开心，说他从两点等到六点，总算赚到一百元，没有被交警发现没有扣留驾驶证罚款两百。然后，他开始恨恨诉苦，机场那帮孙子，一天赚八百！给了交警还有好多钱！</p>
        </div>
        <!-- <h2>水平滚动</h2>
        <div class="horizontal">
            <p>在地铁上，一个妈妈带着孩子坐地铁，车上挤满了人，孩子不停地一边说我的黄色小球呢，一边哭。最后车上所有的人都帮小孩子找球，找遍了全车，也没找到一个球。孩子忽然不哭，手指放到鼻孔里说："我再做一个"。[挖鼻屎]</p>
        </div>
        <h2>双向滚动</h2>
        <div class="both"><img src="http://image.zhangxinxu.com/image/study/s/s512/mm1.jpg" width="512" height="381"></div>
        <h2>不显示滚动条</h2>
        <div id="result"></div>
        <div class="noscrollbar">
            Google提出了"井号+感叹号"的结构。<br /><br />
            http://example.com#!1<br /><br />
            当Google发现上面这样的URL，就自动抓取另一个网址：<br /><br />
            http://example.com/?_escaped_fragment_=1<br /><br />
            只要你把AJAX内容放在这个网址，Google就会收录。但是问题是，"井号+感叹号"非常难看且烦琐。
        </div> -->
    </section>
</template>
<style>
    .vertical {
        height: 200px;
        overflow: hidden;
    }

    .horizontal {
        overflow: hidden;
    }
    .horizontal p {
        width: 600px;
    }
    .both {
        width: 100%; height: 220px;
        overflow: hidden;
    }
    .both img {
        vertical-align: bottom;
    }
    .noscrollbar {
        height:100px;
        overflow: hidden;
    }
    .scroller_vertical,
    .scroller_horizontal {	
        border-radius: 2.5px;
        background-color: rgba(0,0,0,.35);
        -webkit-transition: opacity .5s;
                transition: opacity .5s;
        position: absolute;
        opacity: 0;
    }
    .scroller_vertical {
        width: 5px;
        right: 0;
        top: 0;
    }
    .scroller_horizontal {
        height: 5px;
        bottom: 0;
    }
</style>

<script>
// const simpScroller = (function() {
// 	// 根据是否支持touch方法确定事件的类型
// 	let _upSupportTouch = !((window.DocumentTouch && document instanceof window.DocumentTouch) || 'ontouchstart' in window) * 1
// 		, _event = {
// 		start: ["touchstart", "mousedown"][_upSupportTouch],
// 		move: ["touchmove", "mousemove"][_upSupportTouch],
// 		end: ["touchend", "mouseup"][_upSupportTouch]
// 	};
	
// 	// 滚动
// 	let _scroller = function(container, direction, params) {
// 		let key = "top", Key = "Top", size = "height", Size = "Height", pageKey = "pageY";
// 		if (direction == "horizontal") {
// 			key = "left";
// 			Key = "Left"
// 			size = "width";
// 			Size = "Width"
// 			pageKey = "pageX";
// 		}
		
// 		// 插入滚动条
// 		let scroller = null;
// 		if (params.hideScrollBar == false) {
// 			scroller = document.createElement("div");
// 			scroller.className = "scroller_" + direction;
// 			params.container.appendChild(scroller);
// 		}
		
// 		// 容器尺寸以及包含滚动的尺寸
// 		let sizeContainer = container["client" + Size]
// 			// 因为有滚动动态加载等情况出现，因此默认为0
// 			, sizeContainerWithScroll = 0;
		
// 		// 滚动条位置定位方法
// 		let fnPosScroll = function() {
// 			if (scroller == null) return;
// 			let sizeScroller = scroller.style[size].replace("px", "")
// 				, keyScroller = container["scroll" + Key] / (sizeContainerWithScroll - sizeContainer) * (sizeContainer - sizeScroller);
            
//             // 边界溢出的修正
// 			if (sizeContainer - sizeScroller - keyScroller <= 0) {
//                 keyScroller = sizeContainer - sizeScroller;
//             }
//             // 设置回调（滚到顶部）
//             if (keyScroller == 0){
//                 console.log('回到顶部')
//             }
//             // 设置回调（滚到底部）
//             if (keyScroller == (sizeContainer - sizeScroller)){
//                 console.log('回到底部')
//             }

// 			// 滚动条的定位 （top方式设置）
//             //scroller.style[key] = keyScroller + "px";
//             scroller.style.transform = ('translate(0px,'+(keyScroller)+'px)')
//             scroller.style.webkitTransform = ('translate(0px,'+(keyScroller)+'px)')
//             scroller.style.transitionDuration = ('1000ms')
//             scroller.style.webkitTransitionDuration = ('translate(0px,'+(keyScroller)+'px)')
// 		};
		
// 		// 事件
// 		let pos = {};
// 		container.addEventListener(_event.start, function(event) {	
// 			sizeContainerWithScroll = this["scroll" + Size];
// 			pos[pageKey] = event.touches? event.touches[0][pageKey]: event[pageKey];
// 			pos[key] = this["scroll" + Key];
// 			document.moveFollow = true;
// 			if (scroller && sizeContainerWithScroll > sizeContainer) {
// 				scroller.style.opacity = 1;
// 				scroller.style[size] = (sizeContainer * sizeContainer / sizeContainerWithScroll) + "px";
// 				fnPosScroll();	
// 			}
// 		});	
// 		container.addEventListener(_event.move, function(event) {		
// 			if (_upSupportTouch == false || (document.moveFollow == true)) {
// 				// touch设备或有可移动标志
// 				this["scroll" + Key] = pos[key] + (pos[pageKey] - (event.touches? event.touches[0][pageKey]: event[pageKey]));
// 				// 自定义滚动条的位置
// 				fnPosScroll();
// 				// 回调
// 				params.onScroll.call(this, event);
// 			}	
// 			// 阻止默认滚动
// 			event.preventDefault();
// 		});
// 		container.addEventListener(_event.end, function(event) {
// 			scroller && (scroller.style.opacity = 0);
// 		});
		
// 		if (_upSupportTouch == true) {
// 			document.addEventListener("mouseup", function() {
// 				this.moveFollow = false;	
// 			});	
// 		}
// 	};
	
// 	// 滚动方法
// 	return function(container, options) {
// 		options = options || {};
// 		// 确定参数
// 		let params = new Object({
// 			verticalScroll: true,
// 			horizontalScroll: false,
// 			hideScrollBar: false,
// 			onScroll: function() {}
// 		}), key;
// 		for (key in options) {
// 			params[key] = options[key];	
// 		}
// 		console.log(container)
// 		if (window.getComputedStyle(container).position == "static") {
// 			container.style.position = "relative";
// 		}

		
// 		// 子元素们
// 		let childerns = container.childNodes
// 		// 文档片段
// 			, fragment = document.createDocumentFragment();
			
// 		// 将子元素的集合放在文档片段中
// 		// 方便实现wrap效果
// 		[].slice.call(childerns).forEach(function(child) {
// 			fragment.appendChild(child);	
// 		});
		
// 		// wrap的父元素
// 		let wrap = document.createElement("div");
// 		wrap.style.height = "100%";
// 		wrap.style.width = "100%";
// 		wrap.style.overflow = "hidden";
		
// 		// 容器插入包裹元素
// 		container.appendChild(wrap);
// 		// 加载子元素集合文档片段，完成wrap包裹效果
// 		wrap.appendChild(fragment);
// 		params.container = container;
		
// 		if (params.verticalScroll == true) {
// 			_scroller(wrap, "vertical", params);	
// 		}
// 		if (params.horizontalScroll == true) {
// 			_scroller(wrap, "horizontal",  params);	
// 		}
// 	};
// })();
import { simpScroller } from '@/util/simpScroller'
// console.log(simpScroller())
export default {
    mounted () {
        if (window.addEventListener) {
            this.$nextTick(function () {
                simpScroller(document.querySelector(".vertical"));
            })
            		
            // simpScroller(document.querySelector(".horizontal"), {
            //     verticalScroll: false,
            //     horizontalScroll: true,	
            // });	
            // simpScroller(document.querySelector(".both"), {
            //     horizontalScroll: true	
            // });	
            // simpScroller(document.querySelector(".noscrollbar"), {
            //     hideScrollBar: true,
            //     onScroll: function(event) {
            //         console.log("type: " + event.type);
            //     }
            // });	
        }
    }
}
</script>
